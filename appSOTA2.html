<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Draft Tool</title>
    <link rel="stylesheet" href="style_copy.css" />

    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  </head>



  <body>
    <div>
    <form action="" autocomplete="off">

      <input type="text" id="searchbar" placeholder="add a Champ..."/>
    </div>
      <ul class="list"></ul>
      <script src="script3.js"></script>

    </form>
    <div class="box-container">
      <div class="box">
        <p class="bg-blue">B1</p>
        <div class="items" id="b1">
        </div>
      </div>
      <div class="box">
        <p class="bg-red">R1</p>
        <div class="items" id="r1"></div>
      </div>
    </div>
    <div class="box-container">
      <div class="box">
        <p class="bg-blue">B2</p>
        <div class="items" id="b2">
        </div>
      </div>
      <div class="box">
        <p class="bg-red">R2</p>
        <div class="items" id="r2"></div>
      </div>
    </div>    <div class="box-container">
      <div class="box">
        <p class="bg-blue">B3</p>
        <div class="items" id="b3">
        </div>
      </div>
      <div class="box">
        <p class="bg-red">R3</p>
        <div class="items" id="r3"></div>
      </div>
    </div>
    <div class="box-container">
      <div class="box">
        <p class="bg-blue">B4</p>
        <div class="items" id="b4">
        </div>
      </div>
      <div class="box">
        <p class="bg-red">R4</p>
        <div class="items" id="r4"></div>
      </div>
    </div>
    <div class="box-container">
      <div class="box">
        <p class="bg-blue">B5</p>
        <div class="items" id="b5">
        </div>
      </div>
      <div class="box" >
        <p class="bg-red">R5</p>
        <div class="items" id="r5">
        </div>
      </div>
    </div>
    
    </div>
    <p id="outb1">B1</p>
    <p id="outb2">B2</p>
    <p id="outb3">B3</p>
    <p id="outb4">B4</p>
    <p id="outb5">B5</p>
    <br>
    <p id="outr1">R1</p>
    <p id="outr2">R2</p>
    <p id="outr3">R3</p>
    <p id="outr4">R4</p>
    <p id="outr5">R5</p>
    <br>
    <p id="outtest"></p>
    <br>
    <p id="counter">0</p>
    <script src="app.js"></script>


  <py-config type="json">
      {
        "packages": ["numpy","pandas"]
      }
  </py-config>


  <py-script id="my-script">
    from js import document
    from pyodide.ffi.wrappers import add_event_listener
    )

  </py-script>
  <py-script id="my-script2">
    from js import document
    import pandas as pd
    from pyodide.ffi.wrappers import add_event_listener
    from pyodide.http import open_url
    
    
    #funcs
    def print_team_stats(Blue_df, Red_df):
      i = len(Blue_df)-1
      aEngagers = Blue_df['Engager'].cumsum()[i]
      aDisengagers = Blue_df['Disengager'].cumsum()[i]
      aFighters = Blue_df['Fighter'].cumsum()[i]
      aRangers = Blue_df['Ranger'].cumsum()[i]
      aSafeCCs = Blue_df['SafeCC'].cumsum()[i]
      aHardengages = Blue_df['Hardengage'].cumsum()[i]
      aBurst = Blue_df['Burst'].cumsum()[i]
      aDps = Blue_df['Dps'].cumsum()[i]
      aTankiness = Blue_df['Tankiness'].cumsum()[i]
      aAd = Blue_df['Ad'].cumsum()[i]
      aMd = Blue_df['Md'].cumsum()[i]
  
      i = len(Red_df)-1
      eEngagers = Red_df['Engager'].cumsum()[i]
      eDisengagers = Red_df['Disengager'].cumsum()[i]
      eFighters = Red_df['Fighter'].cumsum()[i]
      eRangers = Red_df['Ranger'].cumsum()[i]
      eSafeCCs = Red_df['SafeCC'].cumsum()[i]
      eHardengages = Red_df['Hardengage'].cumsum()[i]
      eBurst = Red_df['Burst'].cumsum()[i]
      eDps = Red_df['Dps'].cumsum()[i]
      eTankiness = Red_df['Tankiness'].cumsum()[i]
      eAd = Red_df['Ad'].cumsum()[i]
      eMd = Red_df['Md'].cumsum()[i]
      print("--------------------------------------------------")
      print("blue stats:                             red stats:")
      print('Rangers:',aRangers,'                       Rangers:',eRangers)
      print('Fighters:',aFighters,'                       Fighters:',eFighters)
      print('Engagers:',aEngagers,'                      Engagers:',eEngagers)
      print('Disengagers:',aDisengagers,'                   Disengagers:',eDisengagers)
      print('SafeCCs:',aSafeCCs,'                       SafeCCs:',eSafeCCs)
      print('Hardengages:',aHardengages,'                  Hardengages:',eHardengages)
      Rolediff_blue = aFighters * 1.8*eEngagers + aFighters * -1.1*eRangers + aFighters * -0.7*eDisengagers \
      + aRangers * 1.1*eFighters + aRangers * 1.1*eDisengagers + aRangers * -2.2*eEngagers \
      + aEngagers *-1.8*eFighters +  + aEngagers * 2.2*eRangers + aEngagers * -0.4*eDisengagers \
      + aDisengagers * 0.7*eFighters + aDisengagers * -1.1*eRangers + aDisengagers * 0.4*eEngagers
      Rolediff_blue = Rolediff_blue * 40
      dmg_split_exp_blue = pow(max(aAd,aMd),1.6) / 5
      dmg_split_exp_red = pow(max(eAd,eMd),1.6) / 5
      StatDiff_blue = -1*eTankiness * dmg_split_exp_blue + aBurst * eDps + aDps * eTankiness + aDps  * -1*eBurst + aTankiness * dmg_split_exp_red + aTankiness * -1*eDps + aTankiness * eBurst + eTankiness * aBurst
      print("Rolediff_blue :", Rolediff_blue)
      print("StatDiff_blue :", StatDiff_blue)
      print("Red tankdiff: ", -1*eTankiness * dmg_split_exp_blue)
      print("Blue burstdiff: ",aBurst * eDps)
      print("Blue dpsdiff: ",aDps * eTankiness)
      print("Red burstdiff: ",aDps  * -1*eBurst)
      print("Blue tankdiff: ",aTankiness * dmg_split_exp_red )
      print("Blue antiburstdiff: ",aTankiness * eBurst )
      print("Red dpsdiff: ",aTankiness * -1*eDps)
      print("--------------------------------------------------")
      return
  
    def create_null_champ_dict():
      champ_dict = {
      "RedAdc" : 0,
      "RedSupp" : 0,
      "RedMid" : 0,
      "RedJung" : 0,
      "RedTop" : 0,
      "BlueAdc" : 0,
      "BlueSupp" : 0,
      "BlueMid" : 0,
      "BlueJung" : 0,
      "BlueTop" : 0}
      return champ_dict
    
    def create_Blue_n_Red_Df(type_df, champ_dict):
      adf1 = type_df.loc[type_df['Name'] == champ_dict['BlueAdc']]
      adf2 = type_df.loc[type_df['Name'] == champ_dict['BlueSupp']]
      adf3 = type_df.loc[type_df['Name'] == champ_dict['BlueMid']]
      adf4 = type_df.loc[type_df['Name'] == champ_dict['BlueJung']]
      adf5 = type_df.loc[type_df['Name'] == champ_dict['BlueTop']]
  
      Blue_df = pd.concat([adf1, adf2, adf3, adf4, adf5], ignore_index=True)
  
      edf1 = type_df.loc[type_df['Name'] == champ_dict['RedAdc']]
      edf2 = type_df.loc[type_df['Name'] == champ_dict['RedSupp']]
      edf3 = type_df.loc[type_df['Name'] == champ_dict['RedMid']]
      edf4 = type_df.loc[type_df['Name'] == champ_dict['RedJung']]
      edf5 = type_df.loc[type_df['Name'] == champ_dict['RedTop']]
  
      Red_df = pd.concat([edf1, edf2, edf3, edf4, edf5], ignore_index=True)
  
      return Blue_df, Red_df

      #funcs
    def do_that():
      champ_dict = create_null_champ_dict()
      df = pd.read_csv(open_url("https://raw.githubusercontent.com/DamianGacic/csv_test/main/customfull2.csv"))
      champ_dict['RedTop'] = document.getElementById("outr1").textContent
      champ_dict['RedJung'] = document.getElementById("outr2").textContent
      champ_dict['RedMid'] = document.getElementById("outr3").textContent
      champ_dict['RedAdc'] = document.getElementById("outr4").textContent
      champ_dict['RedSupp'] = document.getElementById("outr5").textContent
    
      champ_dict['BlueTop'] = document.getElementById("outb1").textContent
      champ_dict['BlueJung'] = document.getElementById("outb2").textContent
      champ_dict['BlueMid'] = document.getElementById("outb3").textContent
      champ_dict['BlueAdc'] = document.getElementById("outb4").textContent
      champ_dict['BlueSupp'] = document.getElementById("outb5").textContent
    
      Blue_df , Red_df = create_Blue_n_Red_Df(df,champ_dict)
      print_team_stats(Blue_df, Red_df)
      return
    
  
    </py-script>
  <button id="executeButton" py-click="do_that()">Analysis</button>





  </body>
</html>